@typeparam TEnum

<RadzenDropDown Name="@Name"
                Data="@Items"
                Value="@Value"
                ValueChanged="@ValueChanged"
                TextProperty="Text"
                ValueProperty="Value"
                TValue="TEnum"
                Style="@Style"
                Placeholder="@Placeholder"
                Disabled="@Disabled" />

@code {
	[Parameter] public string Name { get; set; } = "";
	[Parameter] public string Style { get; set; } = "width:200px";
	[Parameter] public string Placeholder { get; set; } = "";
	[Parameter] public bool Disabled { get; set; } = false;
	[Parameter] public TEnum Value { get; set; }
	[Parameter] public EventCallback<TEnum> ValueChanged { get; set; }

	private List<EnumItem> Items => Enum.GetValues(typeof(TEnum))
		.Cast<TEnum>()
		.Select(e => new EnumItem(GetDisplayName(e!), e))
		.ToList();

	private static string GetDisplayName(object value)
	{
		var field = value.GetType().GetField(value.ToString()!);
		if (field == null) return value.ToString()!;

		var attr = field.GetCustomAttributes(typeof(System.ComponentModel.DataAnnotations.DisplayAttribute), false)
			.Cast<System.ComponentModel.DataAnnotations.DisplayAttribute>()
			.FirstOrDefault();
		return attr?.Name ?? value.ToString()!;
	}

	private record EnumItem(string Text, TEnum Value);
}
