@using Radzen
@using Radzen.Blazor

@if (Visible == false) return;


<div class="@ContainerClass" style="@Style">

    @if (!string.IsNullOrWhiteSpace(Icon))
    {
        <RadzenIcon class="ms-2 align-self-center"
                    Icon="@Icon"
                    Style="@IconStyle" />
    }

    <div class="@ContentClass">
        @if (Horizontal)
        {
            <div class="@LabelClass" style="@LabelStyle">@Key</div>
            <div class="@ValueClass">
                @ChildContent
            </div>

        }
        else
        {
            <span class="@LabelClass" style="@LabelStyle">@Key</span>
            <div class="@ValueClass">
                @ChildContent
            </div>
        }
    </div>

</div>

@code {
    [Parameter] public bool Visible { get; set; } = true;

    [Parameter] public string Key { get; set; } = string.Empty;
    [Parameter] public RenderFragment ChildContent { get; set; }

    /// <summary>Muestra clave y valor en una fila (true) o en columna (false).</summary>
    [Parameter] public bool Horizontal { get; set; } = false;

    /// <summary>Ancho máximo de la etiqueta (clave). Ej: "160px", "12rem", "30%".</summary>
    [Parameter] public string LabelWidth { get; set; }

    /// <summary>Clases extra para el contenedor raíz.</summary>
    [Parameter] public string Class { get; set; }

    /// <summary>Estilos extra para el contenedor raíz.</summary>
    [Parameter] public string Style { get; set; }

    /// <summary>Nombre del icono de Radzen (ej. "info", "check", "alert").</summary>
    [Parameter] public string Icon { get; set; }

    /// <summary>Color CSS del icono (ej. "#6c757d", "var(--rz-secondary)", "tomato").</summary>
    [Parameter] public string IconColor { get; set; }

    // --- Layout classes/styles calculados ---
    private string ContainerClass =>
        $"d-flex flex-row justify-content-between {(Horizontal ? "align-items-start" : "align-items-center")} gap-2 {Class}";

    // Contenido (label+value) como bloque a la izquierda
    private string ContentClass =>
        $"d-flex {(Horizontal ? "flex-row align-items-center" : "flex-column")} flex-grow-1 gap-1";

    private string LabelClass => $"rz-text-caption text-muted m-0 p-0 {(Horizontal ? "me-2" : string.Empty)}";

    private string ValueClass => Horizontal ? "flex-fill" : string.Empty;

    private string LabelStyle =>
        string.IsNullOrWhiteSpace(LabelWidth) ? null : $"max-width:{LabelWidth};";

    private string IconStyle
        => string.IsNullOrWhiteSpace(IconColor) ? null : $"color:{IconColor};";
}
