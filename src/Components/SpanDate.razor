@if (VisibleText.IsNotEmpty())
{
    <span class=@ContainerClass style=@ContainerStyle>
        @if (ShowBadge)
        {
            <RadzenBadge Text=@VisibleText
                         BadgeStyle="BadgeStyle.Secondary"
                         Variant="Variant.Outlined"
                         title=@TooltipText />
        }
        else
        {
            <span class="date-display__text" title=@TooltipText>
                @if (ShowStatus)
                {
                    <strong>@VisibleText</strong>
                }
                else
                {
                    @VisibleText
                }
            </span>
        }

        @if (ShowStatus)
        {
            <BadgetAutoColor Value=@DateStatus />
        }
    </span>
}

@code {
    [Parameter] public DateOnly? Value { get; set; }
    [Parameter] public bool FriendlyMode { get; set; } = true;
    [Parameter] public bool ShowBadge { get; set; }
    [Parameter] public bool ShowStatus { get; set; }
    [Parameter] public string Class { get; set; } = "";
    [Parameter] public string FontSize { get; set; } = "0.875rem";

    private string VisibleText { get; set; } = "";
    private string TooltipText { get; set; } = "";
    private string DateStatus { get; set; } = "";

    private string ContainerClass => string.IsNullOrEmpty(Class)
        ? "date-display"
        : $"date-display {Class}";

    private string ContainerStyle => $"font-size: {FontSize};";

    protected override void OnParametersSet()
    {
        if (Value.IsEmpty())
        {
            ResetState();
            return;
        }

        var date = Value!.Value;
        VisibleText = RegionService.ToLocalFriendlyDate(date);
        TooltipText = FormatHelpers.FormatDate(date);
        DateStatus = GetDateStatus(date);
    }

    private void ResetState()
    {
        VisibleText = "";
        TooltipText = "";
        DateStatus = "";
    }

    private string GetDateStatus(DateOnly date)
    {
        var today = RegionService.DateOnlyNow();

        return date switch
        {
            _ when date == today => "Hoy",
            _ when date == today.AddDays(1) => "Mañana",
            _ when date == today.AddDays(-1) => "Ayer",
            _ when date < today => "Pasado",
            _ => "Futuro"
        };
    }
}

<style>
    .date-display {
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
        white-space: nowrap;
        line-height: 1.4;
    }

    .date-display__text {
        display: inline-block;
    }
</style>